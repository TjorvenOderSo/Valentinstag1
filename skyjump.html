<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>SkyJump</title>
<style>
body{ margin:0; overflow:hidden; background:linear-gradient(#ffe0f0,#ff80b0);}
canvas{ display:block; }
#hud{
  position:absolute; top:10px; left:10px; color:white; font-family:sans-serif; font-size:22px;
}
</style>
</head>
<body>

<canvas id="game"></canvas>
<div id="hud">Herzen: 0 / 40</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let hearts = 0;
const targetHearts = 40;

// Physik
let gravity = 0.5;        // etwas st채rkere Gravitation f체r sanften Fall
let jumpStrength = 10;     // Sprungkraft anpassbar

// Ball
let ball = {x:canvas.width/2, y:canvas.height-50, radius:25, dy:0, onPlatform:false};

// Plattformen
let platforms = [];
// Startplattform
platforms.push({x:canvas.width/2-75, y:canvas.height-20, width:150, height:15, start:true});

// Zuf채llige Plattformen
for(let i=1;i<10;i++){
  platforms.push({
    x: Math.random()*(canvas.width-120),
    y: canvas.height - i*120,
    width: 120,
    height:15,
    start:false
  });
}

function drawBall(){
  ctx.fillStyle="#ff4fa0";
  ctx.beginPath();
  ctx.arc(ball.x, ball.y, ball.radius,0,Math.PI*2);
  ctx.fill();
}

function drawPlatforms(){
  ctx.fillStyle="#aa88aa";
  platforms.forEach(p=>{
    ctx.fillRect(p.x,p.y,p.width,p.height);
  });
}

function update(){
  // Gravitation
  ball.dy += gravity;
  ball.y += ball.dy;
  ball.onPlatform = false;

  // Plattform-Kollision
  platforms.forEach((p,i)=>{
    if(ball.x + ball.radius > p.x && ball.x - ball.radius < p.x + p.width &&
       ball.y + ball.radius > p.y && ball.y + ball.radius < p.y + p.height &&
       ball.dy > 0){

      ball.y = p.y - ball.radius;   // Ball auf Plattform setzen
      ball.dy = -jumpStrength;      // Sprung
      hearts++;
      ball.onPlatform = true;

      // Startplattform entfernen
      if(p.start){
        platforms.splice(i,1);
      }
    }
  });

  // Scroll: Ball immer in Mitte
  if(ball.y < canvas.height/2){
    let diff = canvas.height/2 - ball.y;
    ball.y = canvas.height/2;
    platforms.forEach(p=>{
      p.y += diff;
      if(p.y > canvas.height){
        p.y = 0;
        p.x = Math.random()*(canvas.width-120);
      }
    });
  }

  // Herz-Ziel erreicht
  if(hearts >= targetHearts){
    setTimeout(()=>{ location.href="after1.html"; },500);
  }

  // Ball f채llt zu weit
  if(ball.y > canvas.height){
    ball.y = canvas.height-50;
    ball.dy = 0;
  }

  document.getElementById("hud").innerText = `Herzen: ${hearts} / ${targetHearts}`;
}

// Maussteuerung
document.addEventListener("mousemove",(e)=>{
  ball.x = e.clientX;
});

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  drawPlatforms();
  drawBall();
  update();
  requestAnimationFrame(draw);
}

draw();
</script>

</body>
</html>
